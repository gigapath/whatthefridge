<div class="container">
  <div class="row center-align">
    Shopping List
    <br>
    <button class="fridgeButton btn waves-effect waves-light" ng-click="addToFridge()" ng-disabled="disabled">Add all to Fridge</button>
    <button class="saveButton btn waves-effect waves-light" ng-click="saveModal()" ng-disabled="disabled">Update shopping list</button>
  </div>
  <div class="row center-align">
    <a ng-click='addModal()' class="btn-floating btn-medium waves-effect waves-light blue"><i class="material-icons">add</i></a>
    Add item
  </div>
  <div ng-hide="fridgeFlag">
    All items added to fridge.
  </div>
  <div ng-hide="notSavedFlag">
    Shopping list saved.
  </div>
  <div class="row center-align list-price">
    Total Price: ${{totalPrice.toFixed(2)}}
  </div>
  <ul class="collection">
    <li class="collection-item dismissable" ng-repeat="ingredient in shoppingList track by $index">
      <h5>{{ingredient.name}}</h5>
      <table>
        <tr>
          <td>Qty</td>
          <td><input ng-blur="updatePrice($index, prevPrice, prevQty)" ng-click="ingredient.qty ? prevQty=ingredient.qty : 0" class="quantity" name="qty" ng-model="ingredient.qty" min="0" ng-pattern="/^[0-9][0-9]{0,2}(?:,?[0-9]{3}){0,3}(?:\.[0-9]{1,2})?$/"></input></td>
        </tr>
        <tr>
          <td>Expiration</td>
          <td><input type="date" ng-model="ingredient.expiration" class="datepicker"></input></td>
        </tr>
        <tr>
          <td>Price</td>
          <td>
          <form class="priceForm" name="priceForm{{$index}}">
            <input required name="price" ng-click="ingredient.price ? prevPrice=ingredient.price : 0" ng-blur="savePrice(ingredient, prevPrice, $index)" ng-model="ingredient.price" min="0" value="{{ingredient.price}}" ng-pattern="/^\d+\.\d{2}$/"></input>
            <button class="modal-action modal-close waves-effect waves-green btn-flat" ng-click="scanBarcode()">Scan It!</button>
            </td>
          </form>
        </tr>
      </table>

      <!-- <div>Qty: <input class="quantity" name="qty" ng-model="ingredient.qty" min="0"></input><div>
      <div>Price: 
        <form class="priceForm" name="priceForm{{$index}}">
          <input required name="price" ng-model="ingredient.price" min="0" value="{{ingredient.price}}" ng-pattern="/^\d+\.\d{2}$/"></input>
          <button ng-click="savePrice(ingredient, $index)">Save</button></form>
      </div>
      <div>Expiration: <input type="date" class="datepicker" style="width: 30%;"></input></div> -->
    </li>
  </ul>

<!-- TEST HTML starts -->
  <section id="container" class="container">
        <h3>The user's camera</h3>
        <div class="controls">
            <fieldset class="input-group">
                <button class="stop">Stop</button>
            </fieldset>
            <fieldset class="reader-config-group">
                <label>
                    <span>Barcode-Type</span>
                    <select name="decoder_readers">
                        <option value="code_128" selected="selected">Code 128</option>
                        <option value="code_39">Code 39</option>
                        <option value="ean">EAN</option>
                        <option value="ean_8">EAN-8</option>
                        <option value="upc">UPC</option>
                        <option value="upc_e">UPC-E</option>
                        <option value="codabar">Codabar</option>
                        <option value="i2of5">I2of5</option>
                    </select>
                </label>
                <label>
                    <span>Resolution (long side)</span>
                    <select name="input-stream_constraints">
                        <option value="320x240">320px</option>
                        <option selected="selected" value="640x480">640px</option>
                        <option value="800x600">800px</option>
                        <option value="1280x720">1280px</option>
                        <option value="1600x960">1600px</option>
                        <option value="1920x1080">1920px</option>
                    </select>
                </label>
                <label>
                    <span>Patch-Size</span>
                    <select name="locator_patch-size">
                        <option value="x-small">x-small</option>
                        <option value="small">small</option>
                        <option selected="selected" value="medium">medium</option>
                        <option value="large">large</option>
                        <option value="x-large">x-large</option>
                    </select>
                </label>
                <label>
                    <span>Half-Sample</span>
                    <input type="checkbox" checked="checked" name="locator_half-sample" />
                </label>
                <label>
                    <span>Workers</span>
                    <select name="numOfWorkers">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option selected="selected" value="4">4</option>
                        <option value="8">8</option>
                    </select>
                </label>
            </fieldset>
        </div>
      <div id="result_strip">
        <ul class="thumbnails"></ul>
        <ul class="collector"></ul>
      </div>
      <div id="interactive" class="viewport"></div>
    </section>
<!-- TEST HTML ends -->

</div>

<!-- saveList Modal -->
  <div id="saveList" class="modal">
    <form ng-submit="saveList()">
      <div class="modal-content">
        <div class="container">
          <div class="input-field">
            <label for="listName">Shopping List Name (optional)</label>
            <input type="text" id="listName" ng-model="listName"/>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <a class=" modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
        <button type="submit" class="modal-action modal-close waves-effect waves-green btn-flat">Save</button>
      </div>
    </form>
  </div>

<!-- add item Modal -->
  <div id="addItem" class="modal">
    <form ng-submit="addItem()">
      <div class="modal-content">
        <div class="container">
          <div class="input-field">
            <label for="itemToAdd">Item Name</label>
            <input required type="text" id="itemToAdd" ng-model="itemToAdd"/>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <a class=" modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
        <button type="submit" class="modal-action modal-close waves-effect waves-green btn-flat">Add</button>
      </div>
    </form>
  </div>
